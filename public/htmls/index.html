<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Expand table rows with jQuery - jExpand plugin - JankoAtWarpSpeed demos</title>
    <style type="text/css">
        body { font-family:Arial, Helvetica, Sans-Serif; font-size:0.8em;}
        #report { border-collapse:collapse;}
        #report h4 { margin:0px; padding:0px;}
        #report img { float:right;}
        #report ul { margin:10px 0 10px 40px; padding:0px;}
        #report th { background:#7CB8E2 url(header_bkg.png) repeat-x scroll center left; color:#fff; padding:7px 15px; text-align:left;}
        #report td { background:#C7DDEE none repeat-x scroll center left; color:#000; padding:7px 15px; }
        #report tr.odd td { background:#fff url(row_bkg.png) repeat-x scroll center left; cursor:pointer; }
        #report div.arrow { background:transparent url(arrows.png) no-repeat scroll 0px -16px; width:16px; height:16px; display:block;}
        #report div.up { background-position:0px 0px;}
    </style>

    <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>-->

    <script type="text/javascript" src="/javascripts/jquery-1.7.2.js"></script>
    <script type="text/javascript">  
        $(document).ready(function(){
            $("#report tr").addClass("odd");
            $("#report tr:first-child").removeClass("odd");
            
            $("#report tr.odd").click(function(){
	            var summaryRow = $(this);
                var detailRow = summaryRow.next("tr");
                if (!detailRow || detailRow.length == 0 || detailRow.hasClass("odd")) {
                    detailRow = $("<tr></tr>");
                    summaryRow.after(detailRow);
                }

                summaryRow.find(".arrow").toggleClass("up");

                if(!detailRow.attr('loading') && !detailRow.attr('loaded')){
                    detailRow.append("<td colspan='5'>Loading</td>");
                }
                else {
                    detailRow.toggle();
                }

                if (detailRow.attr('loaded')) {
                    return;
                }

                detailRow.attr('loading', true);
                $.ajax({
                    url: "/s/" + summaryRow.find("td:first").text(),
                    dataType: 'json',
                    success: function(data){
                        detailRow.attr('loaded', true);
                        detailRow.empty();
                        var header = "<tr>";
                        var rowData = "<tr>";
                        for (var p in data) {
                            header += "<td>" + p + "</td>";
                            rowData += "<td>" + data[p] + "</td>";
                        }
                        header += "</tr>";
                        rowData += "</tr>";
                        var table = "<table>" + header + rowData + "</table>";
                        detailRow.append(table);
                    }
	            });
            });
        });
    </script>        
</head>
<body>
    <h1>JankoAtWarpSpeed demos</h1>
    <table id="report">
        <tr>
            <th>Country</th>
            <th>Population</th>
            <th>Area</th>
            <th>Official languages</th>
            <th></th>
        </tr>
        <tr>
            <td>United States of America</td>
            <td>306,939,000</td>
            <td>9,826,630 km2</td>
            <td>English</td>
            <td><div class="arrow"></div></td>
        </tr>
        <tr>
            <td>United Kingdom </td>
            <td>61,612,300</td>
            <td>244,820 km2</td>
            <td>English</td>
            <td><div class="arrow"></div></td>
        </tr>
        <tr>
            <td>India</td>
            <td>1,147,995,904</td>
            <td>3,287,240ï¿½ km2</td>
            <td>Hindi, English</td>
            <td><div class="arrow"></div></td>
        </tr>
        <tr>
            <td>Canada</td>
            <td>33,718,000</td>
            <td>9,984,670 km2</td>
            <td>English, French</td>
            <td><div class="arrow"></div></td>
        </tr>
        <tr>
            <td>Germany</td>
            <td>82,060,000</td>
            <td>357,021 km2</td>
            <td>German</td>
            <td><div class="arrow"></div></td>
        </tr>
    </table>
    <em>* Information taken from Wikipedia</em>
</body>
</html>
